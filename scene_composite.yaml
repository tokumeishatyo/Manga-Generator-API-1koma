# nano banana pro 最終シーン合成設定ファイル (左右同時カットイン衝突対応版)
# 目的: 左右のキャラクターそれぞれの背後に独立したカットイン演出背景を配置し、
# それらが同時に発生した場合の「衝突表現」までを制御する。
type: final_scene_composition_dual_cutin

# ====================================================
# 0. 生成制御設定 (Generation Control) ★AIの暴走防止
# ====================================================
generation_control:
  creativity: "None (Robotically follow instructions)"  # ロボットのように従う
  interpretation: "Literal"                             # 解釈を入れない
  reference_strength: "High (0.9)"                      # 参照画像の優先度
  contextual_fill: "Disabled"                           # 文脈による穴埋め禁止

# ----------------------------------------------------
# 1. メイン背景 (Main Background) - レイヤーLv.1
# ----------------------------------------------------
background:
  source_image: "classroom_ruins.jpg" # 通常の背景画像
  # 同時カットイン時は背景をかなり暗くすると演出が映えます
  dimming: 0.7                        # 0.0(そのまま) 〜 1.0(真っ暗)

# ----------------------------------------------------
# 2. カットイン演出レイヤー (Cut-in Effect Layers) - レイヤーLv.2
# ※ここで左右の演出背景を定義します
# ----------------------------------------------------
cutin_effects:
  # === 左側キャラ用演出 ===
  left_effect:
    enabled: true                     # 左側の演出をオンにするか
    source_image: "blue_speed_lines.jpg" # 青い集中線などの画像素材
    # もし素材がない場合は簡易生成も可: effect_type: "Speed Lines (Blue)"
    
    blend_mode: "Add (発光)"          # 合成モード: Add, Screen, Normal
    opacity: 1.0                      # 不透明度

  # === 右側キャラ用演出 ===
  right_effect:
    enabled: true                     # 右側の演出をオンにするか
    source_image: "red_explosion_bg.jpg" # 赤い爆発背景などの画像素材
    # もし素材がない場合は簡易生成も可: effect_type: "Explosion Burst (Red)"
    
    blend_mode: "Add (発光)"          # 合成モード
    opacity: 1.0

# ----------------------------------------------------
# 3. 衝突合成設定 (Collision Settings)
# ※左右両方の演出がオン(true)の時だけ有効になる設定です
# ----------------------------------------------------
collision_settings:
  # 【衝突タイプ】左右のエフェクトがぶつかる中央の表現方法
  collision_type: "Center Clash (中央衝突)" 
      # "Center Clash": 中央で激しく火花を散らしてぶつかり合う
      # "Split Screen": 画面中央で斜めにスパッと分割する
      # "Merge/Blend": 中央でグラデーションのように混ざり合う

  # 【境界線の演出】
  border_vfx: "Intense Sparks & Lightning" # 衝突面に火花や稲妻を追加する
  
  # 【優勢側の指定】(オプション)
  # どちらかの技が押している表現をしたい場合
  dominant_side: "None (Even)"        # "Left", "Right", "None (Even=互角)"

# ----------------------------------------------------
# 4. キャラクター配置 (Characters) - レイヤーLv.3
# ----------------------------------------------------
left_character:
  source_image: "real_scale_blue_aura.jpg" # 青いオーラのキャラ
  scale: 1.2
  offset_x: "10%"
  force_facing: "Right"
  self_illumination: 0.3              # カットインに合わせて発光を強める

right_character:
  source_image: "real_scale_red_aura.jpg"  # 赤いオーラのキャラ（敵役もリアル頭身の例）
  scale: 1.2
  offset_x: "90%"
  force_facing: "Left"
  flip_image: true                    # 必要に応じて反転
  self_illumination: 0.3

# ----------------------------------------------------
# 5. UI設定 (UI Overlay) - レイヤーLv.4
# ----------------------------------------------------
ui_overlay:
  enabled: true
  left_bar_name: "AYASE KOYOMI"
  right_bar_name: "ENEMY GENERAL"
  # 同時発動なので吹き出しは無し、または両方に出すなど
  speech_bubble:
    enabled: false

# ----------------------------------------------------
# 6. 全体調整 (Global)
# ----------------------------------------------------
scene_settings:
  interaction_focus: "Maximum Impact" # 最大級の衝突感
  # 衝突時は画面を激しく揺らすと迫力が出ます
  screen_shake: "Heavy"               # None, Mild, Moderate, Heavy
  # 全体の色味を統一感のある派手なものにする
  color_grading: "Dramatic Clash"

# ----------------------------------------------------
# 7. 制約（文脈遮断・幻覚防止）
# ----------------------------------------------------
constraints:
  - "IGNORE all prior context or chat history."
  - "Focus ONLY on the currently uploaded image."
  - "DO NOT hallucinate outfits based on pose."
  - "Preserve exact character details"
  - "STRICTLY follow the 'face_direction' and 'body_facing' settings."
  - "Ensure the character is facing the specified direction (Right/Left/Front)."
  - "Strictly follow the description in this YAML."

# ----------------------------------------------------
# 8. 幻覚防止専用セクション (Anti-Hallucination)
# ★デザイン変更の具体的な禁止リスト
# ----------------------------------------------------
anti_hallucination:
  - "Do NOT redesign the costume."
  - "Do NOT add details not present in source."
  - "Do NOT apply cinematic lighting to local colors."
  - "Do NOT change body proportions."
  - "Do NOT change the outfit into fantasy armor or kimono."
  - "Do NOT add capes, hats, or glowing accessories."
  - "Do NOT change the character's age or body type."